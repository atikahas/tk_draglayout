<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Layout Sireh</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="assets/css/sireh.css" />
    </head>

    <body>
        <div class="content" style="padding:10px;">
            <div class="row">
                <div class="col-sm-12">
                    <div class="card" id="sireh">
                        <div class="card-body">

                        </div>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="wrapper">
                                <div class="drag-container">
                                    <div class="drag-item drag-item--red" draggable="true"></div>
                                </div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container">
                                    <div class="drag-item drag-item--blue drag-item--prepend" draggable="true"></div>
                                </div>
                                <div class="drag-container"></div>
                                <div class="drag-container">
                                    <div class="drag-item drag-item--green" draggable="true"></div>
                                </div>
                                <div class="drag-container"></div>
                                <div class="drag-container">
                                    <div class="drag-item drag-item--blue drag-item--prepend" draggable="true"></div>
                                </div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container">
                                    <div class="drag-item drag-item--blue drag-item--prepend" draggable="true"></div>
                                </div>
                                <div class="drag-container"></div>
                                <div class="drag-container">
                                    <div class="drag-item drag-item--green" draggable="true"></div>
                                </div>
                                <div class="drag-container"></div>
                                <div class="drag-container">
                                    <div class="drag-item drag-item--red" draggable="true"></div>
                                </div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                                <div class="drag-container"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
        <script>
            function dragStart(e) {
            dragSrcEl = this;
            };

            function dragEnter(e) {
            this.classList.add('drag-over');
            }

            function dragLeave(e) {
            e.stopPropagation();
            this.classList.remove('drag-over');
            }

            function dragOver(e) {
            e.preventDefault();
            return false;
            }

            function dragDrop(e) {
            if (dragSrcEl.classList.contains('drag-item--prepend')) {
                this.prepend(dragSrcEl);
            } else {
                this.appendChild(dragSrcEl);
            }
            return false;
            }

            function dragEnd(e) {
            var listItems = document.querySelectorAll('.drag-container');
            [].forEach.call(listItems, function(item) {
                item.classList.remove('drag-over');
            });
            }

            function touchStart(e) {
            e.preventDefault();
            this.classList.add('drag-item--touchmove');
            }

            var scrollDelay = 0;
            var scrollDirection = 1;
            function pageScroll(a, b) {
            window.scrollBy(0,scrollDirection); // horizontal and vertical scroll increments
            scrollDelay = setTimeout(pageScroll,5); // scrolls every 100 milliseconds

            if (a > window.innerHeight - b) { scrollDirection = 1; }
            if (a < 0 + b) { scrollDirection = -1*scrollDirection; }
            }

            var x = 1;
            function touchMove(e) {
            var touchLocation = e.targetTouches[0],
                w = this.offsetWidth,
                h = this.offsetHeight;

            lastMove = e;
            touchEl = this;
            this.style.width = w + 'px';
            this.style.height = h + 'px';
            this.style.position = 'fixed';
            this.style.left = touchLocation.clientX - w/2 + 'px';
            this.style.top = touchLocation.clientY - h/2 + 'px';

            if (touchLocation.clientY > window.innerHeight - h || touchLocation.clientY < 0 + h) {
                if (x === 1) {
                x = 0;
                pageScroll(touchLocation.clientY, h);
                }
            } else {
                clearTimeout(scrollDelay);
                x = 1;
            }
            }

            function touchEnd(e) {
            var box1 = this.getBoundingClientRect(),
                x1 = box1.left,
                y1 = box1.top,
                h1 = this.offsetHeight,
                w1 = this.offsetWidth,
                b1 = y1 + h1,
                r1 = x1 + w1;

            var targets = document.querySelectorAll('.drag-container');
            [].forEach.call(targets, function(target) {
                var box2 = target.getBoundingClientRect(),
                    x2 = box2.left,
                    y2 = box2.top,
                    h2 = target.offsetHeight,
                    w2 = target.offsetWidth,
                    b2 = y2 + h2,
                    r2 = x2 + w2;

                if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2) {
                return false;
                } else {
                if (touchEl.classList.contains('drag-item--prepend')) {
                    target.prepend(touchEl);
                } else {
                    target.appendChild(touchEl);
                }
                }
            });

            this.removeAttribute('style');
            this.classList.remove('drag-item--touchmove');
            clearTimeout(scrollDelay);
            x = 1;
            }

            function addEventsDragAndDrop(el) {
            el.addEventListener('dragstart', dragStart, false);
            el.addEventListener('dragend', dragEnd, false);
            el.addEventListener('touchstart', touchStart, false);
            el.addEventListener('touchmove', touchMove, false);
            el.addEventListener('touchend', touchEnd, false);
            }

            function addTargetEvents(target) {
            target.addEventListener('dragover', dragOver, false);
            target.addEventListener('dragenter', dragEnter, false);
            target.addEventListener('dragleave', dragLeave, false);
            target.addEventListener('drop', dragDrop, false);
            }

            var targets = document.querySelectorAll('.drag-container');
            [].forEach.call(targets, function(target) {
            addTargetEvents(target);
            });

            var listItems = document.querySelectorAll('.drag-item');
            [].forEach.call(listItems, function(item) {
            addEventsDragAndDrop(item);
            });

        </script>
    </body>
</html>